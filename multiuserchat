server.py:

import socket
import threading

server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server.bind(('127.0.0.1', 5000))
server.listen()

clients = []

def handle(client):
    while True:
        try:
            msg = client.recv(1024)
            for c in clients:
                if c != client:
                    c.send(msg)
        except:
            clients.remove(client)
            client.close()
            break

while True:
    client, addr = server.accept()
    print(f"Connected with {addr}")
    clients.append(client)
    client.send("Welcome to the chat!\n".encode())
    thread = threading.Thread(target=handle, args=(client,))
    thread.start()

import socket
import threading
import tkinter as tk

client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client.connect(('127.0.0.1', 5000))

def receive():
    while True:
        try:
            msg = client.recv(1024).decode()
            chat.insert(tk.END, msg + '\n')
        except:
            break

def send():
    msg = entry.get()
    client.send(msg.encode())
    entry.delete(0, tk.END)

root = tk.Tk()
root.title("Chat Client")

chat = tk.Text(root)
chat.pack()

entry = tk.Entry(root)
entry.pack()

send_btn = tk.Button(root, text="Send", command=send)
send_btn.pack()

threading.Thread(target=receive).start()
root.mainloop()

    
